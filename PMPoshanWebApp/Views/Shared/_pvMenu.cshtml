

<!-- TopNavBar -->

@* <header class="sticky top-0 z-50 flex items-center justify-between whitespace-nowrap bg-background-light/80 px-4 py-3 shadow-md backdrop-blur-md md:px-10">
    <a href="/" class="flex items-center gap-3">
        <div class="size-8 text-primary">
            <svg fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                <path d="M44 4H30.6666V17.3334H17.3334V30.6666H4V44H44V4Z" fill="currentColor"></path>
            </svg>
        </div>
        <h2 class="text-lg font-bold leading-tight tracking-tight text-primary">
            PM Poshan Sikkim
        </h2>
    </a>
    <nav class="hidden items-center gap-6 md:flex">
        <a class="text-sm font-medium text-text-body hover:text-accent" href="/">Home</a>
        <a class="text-sm font-medium text-text-body hover:text-accent" href="#about">About Us</a>
        <a class="text-sm font-medium text-text-body hover:text-accent" href="#events">Events & Notification</a>
        <a class="text-sm font-medium text-text-body hover:text-accent" href="#gallery">Gallery</a>
        <a class="text-sm font-medium text-text-body hover:text-accent" href="#contact">Contact Us</a>
    </nav>
    <div class="flex items-center gap-4">


        <button class="md:hidden text-primary">
            <span class="material-symbols-outlined text-3xl"> menu </span>
        </button>
    </div>
</header> *@

@* <div id="topRibbon" class="w-full bg-primary text-white text-sm py-2 px-4 md:px-10 flex flex-col md:flex-row items-start md:items-center justify-between gap-2">
    <div class="flex items-center gap-2">
        <span class="material-symbols-outlined text-white text-base">mail</span>
        <a href="mailto:info@pmposhansikkim.gov.in" class="hover:underline text-xs md:text-sm break-all">info@pmposhansikkim.gov.in</a>
    </div>

    <div class="flex items-center gap-3 ml-auto md:ml-0">
        <button id="darkModeBtn" class="flex items-center gap-1 hover:opacity-80 transition" aria-label="Toggle dark mode">
            <span class="material-symbols-outlined text-white text-base">dark_mode</span>
        </button>
        <button class="hidden md:flex items-center hover:opacity-80 transition text-white font-semibold text-sm leading-none" aria-label="Decrease font size">A<span class="text-xs align-top">-</span></button>
        <button class="hidden md:flex items-center hover:opacity-80 transition text-white font-semibold text-sm leading-none" aria-label="Reset font size">A</button>
        <button class="hidden md:flex items-center hover:opacity-80 transition text-white font-semibold text-sm leading-none" aria-label="Increase font size">A<span class="text-xs align-top">+</span></button>
        <button class="items-center hover:opacity-80 transition text-white font-semibold text-sm leading-none pl-4">Login</button>
    </div>
</div> *@

<!-- HEADER -->
<header id="mainHeader" class="sticky top-0 z-50 flex items-center justify-between whitespace-nowrap bg-background-light/80 px-4 py-3 shadow-md backdrop-blur-md md:px-10">
    <a href="/" class="flex items-center gap-3">
        <div class="size-8 text-primary">
            <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                <path d="M44 4H30.6666V17.3334H17.3334V30.6666H4V44H44V4Z" fill="currentColor"></path>
            </svg>
        </div>
        <h2 class="text-lg font-bold leading-tight tracking-tight text-primary">
            PM Poshan Sikkim
        </h2>
    </a>
    <nav class="hidden items-center gap-6 md:flex">
        <a class="text-sm font-medium text-text-body hover:text-accent" href="/">Home</a>
        <a class="text-sm font-medium text-text-body hover:text-accent" href="/#about">About Us</a>
        <a class="text-sm font-medium text-text-body hover:text-accent" href="/#events">Events & Notification</a>

        <div class="relative group">
            <button class="text-sm font-medium text-text-body hover:text-accent cursor-pointer transition flex items-center gap-1 py-2">
                Gallery
                <span class="material-symbols-outlined text-base">expand_more</span>
            </button>
            <div class="absolute left-0 top-full hidden w-40 rounded-md bg-white shadow-lg z-50 group-hover:block pt-2">
                <a href="/photos?pageNo=1" class="block px-4 py-2 text-sm hover:bg-gray-100 transition">Photos</a>
                <a href="/videos" class="block px-4 py-2 text-sm hover:bg-gray-100 transition">Videos</a>
            </div>
        </div>

        


        <a class="text-sm font-medium text-text-body hover:text-accent" href="#contact">Contact Us</a>
    </nav>
    <div class="flex items-center gap-4">
        <button id="mobileMenuBtn" class="md:hidden text-primary" aria-expanded="false" aria-controls="mobileMenu" aria-label="Toggle menu">
            <span id="menuIcon" class="material-symbols-outlined text-3xl">menu</span>
        </button>
    </div>
</header>

<!-- MOBILE MENU OVERLAY -->
<div id="menuOverlay" class="hidden fixed inset-0 bg-black/50 z-[45] md:hidden" aria-hidden="true"></div>

<!-- MOBILE MENU -->
<div id="mobileMenu" class="hidden fixed left-0 right-0 w-full bg-white shadow-xl md:hidden z-[46] border-t border-gray-200">
    <nav class="p-4 space-y-1">
        <a href="/" class="text-sm font-medium text-text-body hover:text-accent hover:bg-gray-50 block py-3 px-3 rounded-lg transition">Home</a>
        <a href="#about" class="text-sm font-medium text-text-body hover:text-accent hover:bg-gray-50 block py-3 px-3 rounded-lg transition">About Us</a>
        <a href="#events" class="text-sm font-medium text-text-body hover:text-accent hover:bg-gray-50 block py-3 px-3 rounded-lg transition">Events & Notification</a>

        <div class="border-t border-gray-100 pt-1">
            <button id="mobileGalleryToggle" class="flex w-full items-center justify-between text-sm font-medium text-text-body hover:text-accent hover:bg-gray-50 py-3 px-3 rounded-lg transition" aria-expanded="false" aria-controls="mobileGalleryMenu">
                Gallery
                <span id="galleryIcon" class="material-symbols-outlined text-base transition-transform duration-200">expand_more</span>
            </button>

            <div id="mobileGalleryMenu" class="hidden ml-3 mt-1 space-y-1 border-l-2 border-gray-200 pl-3">
                <a href="/gallery/photos" class="text-sm text-text-body hover:text-accent hover:bg-gray-50 block py-2 px-3 rounded-lg transition">Photos</a>
                <a href="/gallery/videos" class="text-sm text-text-body hover:text-accent hover:bg-gray-50 block py-2 px-3 rounded-lg transition">Videos</a>
            </div>
        </div>

        <a href="#contact" class="text-sm font-medium text-text-body hover:text-accent hover:bg-gray-50 block py-3 px-3 rounded-lg transition">Contact Us</a>
    </nav>
</div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const menuBtn = document.getElementById('mobileMenuBtn');
        const menu = document.getElementById('mobileMenu');
        const menuOverlay = document.getElementById('menuOverlay');
        const menuIcon = document.getElementById('menuIcon');
        const galleryToggle = document.getElementById('mobileGalleryToggle');
        const galleryMenu = document.getElementById('mobileGalleryMenu');
        const galleryIcon = document.getElementById('galleryIcon');
        const header = document.getElementById('mainHeader');

        // Safety checks
        if (!menuBtn || !menu || !header || !menuOverlay) return;

        // Position menu below header
        function positionMenuBelowHeader() {
            const headerRect = header.getBoundingClientRect();
            const topPosition = headerRect.bottom;
            menu.style.top = `${topPosition}px`;
        }

        // Close menu function
        function closeMenu() {
            menu.classList.add('hidden');
            menuOverlay.classList.add('hidden');
            menuIcon.textContent = 'menu';
            menuBtn.setAttribute('aria-expanded', 'false');
            document.body.classList.remove('menu-open');

            // Also close gallery submenu
            if (galleryMenu) {
                galleryMenu.classList.add('hidden');
                if (galleryIcon) galleryIcon.style.transform = 'rotate(0deg)';
                if (galleryToggle) galleryToggle.setAttribute('aria-expanded', 'false');
            }
        }

        // Open menu function
        function openMenu() {
            positionMenuBelowHeader();
            menu.classList.remove('hidden');
            menuOverlay.classList.remove('hidden');
            menuIcon.textContent = 'close';
            menuBtn.setAttribute('aria-expanded', 'true');
            document.body.classList.add('menu-open');
        }

        // Toggle mobile menu
        menuBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            const isHidden = menu.classList.contains('hidden');

            if (isHidden) {
                openMenu();
            } else {
                closeMenu();
            }
        });

        // Close menu when clicking overlay
        menuOverlay.addEventListener('click', closeMenu);

        // Close menu when clicking menu links (except gallery toggle)
        menu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', closeMenu);
        });

        // Gallery submenu toggle
        if (galleryToggle && galleryMenu && galleryIcon) {
            galleryToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                galleryMenu.classList.toggle('hidden');
                const expanded = !galleryMenu.classList.contains('hidden');
                galleryToggle.setAttribute('aria-expanded', expanded);
                galleryIcon.style.transform = expanded ? 'rotate(180deg)' : 'rotate(0deg)';
            });
        }

        // Reposition menu on resize
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                if (!menu.classList.contains('hidden')) {
                    positionMenuBelowHeader();
                }

                // Auto-close menu if switching to desktop
                if (window.innerWidth >= 768 && !menu.classList.contains('hidden')) {
                    closeMenu();
                }
            }, 100);
        });

        // Reposition on scroll
        let scrollTimer;
        window.addEventListener('scroll', () => {
            if (!menu.classList.contains('hidden')) {
                clearTimeout(scrollTimer);
                scrollTimer = setTimeout(positionMenuBelowHeader, 10);
            }
        });

        // Close menu on ESC key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !menu.classList.contains('hidden')) {
                closeMenu();
            }
        });

        // Initial positioning
        positionMenuBelowHeader();
    });
</script>

